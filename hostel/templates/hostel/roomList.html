{% extends 'hostel/base.html' %}

{% load static %}

{% block title %}
Hostel | Allocations
{% endblock %}

{% block style %}
<link rel="stylesheet" href="{% static 'styles/roomlist.css' %}">
{% endblock %}

{% block content %}
<section class="main">
    <div class="wrap">
        <div class="card">
            <div class="card-header">
                <div class="title-wrap">
                    <h1 class="card-title">Room Details</h1>
                </div>
            </div>

            <header class="actions">
                <a href="{% url 'allot_student' %}" class="btn btn-primary">Allocate Room</a>
                <a href="{% url 'view_allotement' %}" class="btn btn-primary">View Allocations</a>
            </header>

            <div class="table-wrap">
                <table aria-describedby="page-title">
                    <thead>
                        <tr>
                            <th scope="col">Room Number</th>
                            <th scope="col">Floor</th>
                            <th scope="col">Capacity</th>
                            <th scope="col">availability</th>
                            <th scope="col">status</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for room in page_obj %}
                        <tr>
                            <td data-label="Room"><span class="badge">{{ room.room_number }}</span></td>
                            <td data-label="Floor">{{ room.floor }}</td>
                            <td data-label="Capacity">{{ room.capacity }}</td>
                            <td data-label="availability">{{ room.available}}</td>
                            <td data-label="Status">
                                <span class="chip {% if room.available > 0 %}good{% else %}bad{% endif %}">
                                    {% if room.available > 0 %}Available{% else %}Full{% endif %}
                                </span>
                            </td>
                        </tr>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <nav class="pagination" role="navigation" aria-label="Pagination">
                <div class="muted-small">
                    <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
                </div>
                <div class="pager">
                    {% if page_obj.has_previous %}
                        <a href="?page=1" class="page-btn" aria-label="First page">«</a>
                        <a href="?page={{ page_obj.previous_page_number }}" class="page-btn" aria-label="Previous page">‹</a>
                    {% else %}
                        <span class="page-btn" disabled>«</span>
                        <span class="page-btn" disabled>‹</span>
                    {% endif %}

                    {% for num in page_obj.paginator.page_range %}
                        {% if page_obj.number == num %}
                            <span class="page-btn current" aria-current="page">{{ num }}</span>
                        {% else %}
                            <a href="?page={{ num }}" class="page-btn" aria-label="Page {{ num }}">{{ num }}</a>
                        {% endif %}
                    {% endfor %}

                    {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}" class="page-btn" aria-label="Next page">›</a>
                        <a href="?page={{ page_obj.paginator.num_pages }}" class="page-btn" aria-label="Last page">»</a>
                    {% else %}
                        <span class="page-btn" disabled>›</span>
                        <span class="page-btn" disabled>»</span>
                    {% endif %}
                </div>
            </nav>
        </div>
    </div>
</section>
{% endblock %}