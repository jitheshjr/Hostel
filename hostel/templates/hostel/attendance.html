{% extends 'hostel/base.html' %}

{% load static %}

{% block title %}
Hostel | Attendance
{% endblock %}

{% block style %}
<link rel="stylesheet" href="{% static 'styles/attendance.css' %}">
{% endblock %}

{% block content %}
<div class="main">
    <div class="attendance-validation">
        {% if messages %}
        <ul class="messages" >
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}><mark>{{ message }}</mark></li>
            {% endfor %}
        </ul>
        {% endif %}
        <div class="attendance-form">
            <div class="header-links">
                <a href="#" id="closeBtn" class="back-link">&#10006;</a>
            </div>
            <h5>Attendance Form</h5>
            <input type="text" id="studentSearch" placeholder="Search by student name" onkeyup="filterStudents()">
            <form action="" method="post">
                {% csrf_token %}
                <div id="student-container">
                    {{form.as_p}}
                </div>
                <input type="submit" value="submit">
            </form>
        </div>
    </div>
</div>
<script>
    document.getElementById('closeBtn').addEventListener('click', function(event){
        event.preventDefault();
        window.history.back();
    }); 

    function filterStudents(){
        let input = document.getElementById('studentSearch');
        let filter = input.value.toLowerCase();
        let studentContainer = document.getElementById('student-container');
        let students = studentContainer.getElementsByTagName('label');

        for (let i = 0; i < students.length; i++) {
            let label = students[i];
            let text = label.textContent || label.innerText;
            if (text.toLowerCase().includes(filter)) {
                label.style.display = '';
            } else {
                label.style.display = 'none';
            }
        }
    }
</script>
{% endblock %}
